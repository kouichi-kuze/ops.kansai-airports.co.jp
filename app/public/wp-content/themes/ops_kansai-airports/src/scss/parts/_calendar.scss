// 共通スタイル
@use "../utils/variables" as g;
@use "../utils/mixin" as m;

// _clinic-calendar.scss
// カレンダーコンポーネント用SCSS

// カラーパレット変数
$eo-calendar-width: 100%;
$eo-nav-bg: #007cba;
$eo-nav-color: #ffffff;
$eo-weekend-bg: #f5f7fa;
$eo-holiday-bg: #ffefef;
$eo-day-border: #e1e4e8;
$eo-cell-padding: 0.75rem;
$eo-font-family: 'Helvetica Neue', Arial, sans-serif;

.eo-fullcalendar {
  width: 100%;
  border-collapse: collapse;
  margin: 0 auto;

  // ヘッダー（Prev/Next と月表示）
  .fc-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0;
    position: relative;
    gap: 20px;

    .fc-right {
      position: absolute;
      right: 0;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      .fc-button-group {
        margin-left: 10px;

        &:last-child {
          display: none;
        }
      }
    }

    .fc-today-button {
      display: none;
    }

    .fc-corner-prev,
    .fc-corner-next {
      background-color: $eo-nav-bg;
      color: $eo-nav-color;
      border: none;
      border-radius: 4px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 0.9rem;

      &:hover {
        background-color: darken($eo-nav-bg, 10%);
      }
    }

    .eo-calendar-title {
      font-size: 1.2rem;
      font-weight: bold;
    }
  }

  // テーブルスタイル

  .fc-content-skeleton {
    margin-top: -1px;
    border-collapse: collapse;
    border-spacing: 0;
    table {
      //border-top: solid 1px #F0F0F0;
      thead,
      tbody {
        tr>* {
          border-left: solid 1px #F0F0F0 !important;
        }

        tr>*:first-child {
          border-left: solid 0 #F0F0F0 !important;
        }
        
      }
    }

  }

  .fc-day-grid-container {
    //border: solid 0 red;
  }

  .fc-view-container {
    //border: solid 1px #F0F0F0;
  }

  .fc-month-view {
    > table {
      border: solid 1px #F0F0F0;
      > thead {
        background-color: #FBFBFB;
      }
      td {
        table {
          border: solid 0 #F0F0F0;
        }
      }
    }
  }

  table {
    width: 100%;
    table-layout: fixed;
    border-collapse: collapse;
    border-spacing: 0;
    //border-right: solid 1px #F0F0F0;

    thead {
      background-color: transparent;

      th {
        font-family: g.$font-noto-sans;
        font-size: 11px;
        height: 24px;
        font-weight: 400;
        text-align: center;
        
        //border-top: solid 1px #F0F0F0;
        //border-left: solid 1px #F0F0F0;
        border-collapse: collapse;
        border-spacing: 0;
        border-left: solid 0 #F0F0F0;
        position: relative;
        &:before {
          content: "";
          height: 100%;
          width: 1px;
          position: absolute;
          left: 0;
          top: 0;
          z-index: 2;
          background-color: #F0F0F0;
        }
         
         &.fc-sat
         &.fc-sat,
         &.fc-sun,
         &.fc-holiday {
         }
         &.fc-mon,
         &.fc-tue,
         &.fc-wed {
          left: -1px;
         }

         &.fc-sun {
          &:before {
            background-color: transparent;
          }
         }
      }
    }

    tbody {
      display: table-row-group;
      vertical-align: middle;
      .fc-widget-content {
        //border-bottom: solid 1px #F0F0F0;
        padding: 0 !important;
      }
      
      tr {
        td {
          //border: 1px solid $eo-day-border;
          vertical-align: top;
          padding: 0;
          font-family: g.$font-ibm-plex-sans;
          font-size: 9px;
          font-weight: 400;
          height: auto;
          //border-left: solid 1px #F0F0F0;
          background-color: g.$white;
          padding: 10px 0;

          &.fc-day-number {
            border-top: solid 1px #F0F0F0;
            height: auto;
            text-align: right;
            padding: 3px;
            //border-left: solid 1px #F0F0F0;
          }

          &.fc-day {
            height: 0;
            display: none;
          }

          .fc-event {
            pointer-events: none;
          }

          .fc-content {
            background-color: #80D8D0;
            color: g.$white;
            font-size: 11px;
            font-weight: 500;
            border-radius: 3px;
            width: 90%;
            max-width: 52px;
            @include m.mx-auto;
            text-align: center;
          }

          .fc-widget-header {
            background-color: red !important;
          }

          .eo-fullcalendar-screen-reader-text {
            display: none;
          }


          // 祝日クラスを事前に付与しておく場合
          &.eo-holiday {
            background-color: $eo-holiday-bg;
          }

          // 日付番号
          .eo-day-number {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            font-size: 0.85rem;
            font-weight: bold;
          }

          // イベントリスト
          ul.eo-events-list {
            list-style: none;
            margin: 1.5rem 0 0;
            padding: 0;

            li {
              margin-bottom: 0.25rem;
              padding: 0.25rem 0.5rem;
              border-radius: 3px;
              font-size: 0.75rem;
              color: #ffffff;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;

              &.event-all-closed {
                background-color: #e74c3c;
              }
              &.event-am-closed {
                background-color: #f39c12;
              }
              &.event-pm-closed {
                background-color: #3498db;
              }
              &.event-special-closed {
                background-color: #95a5a6;
              }
            }
          }
        }
      }
    }
  }

  // 基本スタイル
  .fc-prev-button,
  .fc-next-button {
    display: inline-block;
    width: 32px;   // アイコンの幅
    height: 32px;  // アイコンの高さ
    padding: 0;
    border: none;
    background-color: transparent;
    background-repeat: no-repeat;
    background-position: center center;
    background-size: contain;
    text-indent: -9999px; // ボタンテキストをスクリーンリーダー用に残しつつ非表示
    cursor: pointer;
    transition: opacity 0.2s ease;
    background-color: #80D8D0;
    position: relative;
    border-radius: 3px;
    &:hover,
    &.fc-state-hover {
      opacity: 0.8;
    }
  }

  // アイコン設定
  .fc-icon-left-single-arrow {
    background-image: url(../img/common/ico_arrow_left_white.svg);
    background-repeat: no-repeat;
    background-size: contain;    
    width: 7px;
    height: 14px;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    z-index: 2;
  }

  .fc-icon-right-single-arrow {
    background-image: url(../img/common/ico_arrow_right_white.svg);
    background-repeat: no-repeat;
    background-size: contain;    
    width: 7px;
    height: 14px;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%,-50%);
    z-index: 2;
  }

  // 無効状態のスタイル（必要なら）
  .fc-prev-button.fc-state-disabled,
  .fc-next-button.fc-state-disabled {
    opacity: 0.3;
    cursor: default;
    pointer-events: none;
  }
}
